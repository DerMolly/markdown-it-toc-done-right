!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).markdownitTocDoneRight=e()}}(function(){return function i(l,s,a){function c(n,e){if(!s[n]){if(!l[n]){var r="function"==typeof require&&require;if(!e&&r)return r(n,!0);if(u)return u(n,!0);var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}var o=s[n]={exports:{}};l[n][0].call(o.exports,function(e){return c(l[n][1][e]||e)},o,o.exports,i,l,s,a)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(e,n,r){"use strict";function t(e){return encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-"))}function c(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}n.exports=function(e,a){a=Object.assign({},{placeholder:"(\\$\\{toc\\}|\\[\\[?_?toc_?\\]?\\])",slugify:t,containerClass:"table-of-contents",listClass:void 0,itemClass:void 0,linkClass:void 0,level:1,listType:"ol",format:void 0},a);var r=void 0,l=new RegExp("^"+a.placeholder+"$","i");e.renderer.rules.toc_open=function(){return'<nav class="'+c(a.containerClass)+'">'},e.renderer.rules.toc_close=function(){return"</nav>"},e.renderer.rules.toc_body=function(){return function r(t,o){o=o||{};var e=a.listClass?' class="'+c(a.listClass)+'"':"";var i=a.itemClass?' class="'+c(a.itemClass)+'"':"";var l=a.linkClass?' class="'+c(a.linkClass)+'"':"";var n=Object.keys(t.c);if(0===n.length)return"";var s="<"+(c(a.listType)+e)+">";n.forEach(function(e){var n=t.c[e];s+="<li"+i+"><a"+l+' href="#'+function(e){var n=e,r=2;for(;o.hasOwnProperty(n);)n=e+"-"+r++;return o[n]=!0,n}(a.slugify(e))+'">'+("function"==typeof a.format?a.format(e,c):c(e))+"</a>"+r(n,o)+"</li>"});s+="</"+c(a.listType)+">";return s}(r)},e.core.ruler.push("generate_toc_ast",function(e){var n=e.tokens;r=function(e){for(var n={l:0,n:"",c:{}},r=[n],t=0,o=e.length;t<o;t++){var i=e[t];if("heading_open"===i.type){var l={l:parseInt(i.tag.substr(1),10),n:e[t+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),c:{}};if(l.l>=a.level)if(l.l>r[0].l)r[0].c[l.n]=l,r.unshift(l);else if(l.l===r[0].l)r[1].c[l.n]=l,r[0]=l;else{for(;l.l<=r[0].l;)r.shift();r[0].c[l.n]=l,r.unshift(l)}}}return n}(n)}),e.block.ruler.before("heading","toc",function(e,n){var r=void 0,t=e.bMarks[n]+e.tShift[n],o=e.eMarks[n],i=e.src.slice(t,o).split(" ")[0];return!(!l.test(i)||(e.line=n+1,(r=e.push("toc_open","nav",1)).markup="",r.map=[n,e.line],(r=e.push("toc_body","",0)).markup="",r.map=[n,e.line],r.children=[],(r=e.push("toc_close","nav",-1)).markup=""))},{alt:["paragraph","reference","blockquote"]})}},{}]},{},[1])(1)});
