function e(e){return encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-"))}function n(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}module.exports=function(r,t){var l;t=Object.assign({},{placeholder:"(\\$\\{toc\\}|\\[\\[?_?toc_?\\]?\\])",slugify:e,containerClass:"table-of-contents",listClass:void 0,itemClass:void 0,linkClass:void 0,level:1,listType:"ol",format:void 0},t);var s=new RegExp("^"+t.placeholder+"$","i");r.renderer.rules.tocOpen=function(){return'<nav class="'+n(t.containerClass)+'">'},r.renderer.rules.tocClose=function(){return"</nav>"},r.renderer.rules.tocBody=function(){return function e(r,l){l=l||{};var s=t.listClass?' class="'+n(t.listClass)+'"':"",o=t.itemClass?' class="'+n(t.itemClass)+'"':"",a=t.linkClass?' class="'+n(t.linkClass)+'"':"",i=Object.keys(r.c);if(0===i.length)return"";var c="<"+(n(t.listType)+s)+">";return i.forEach(function(s){var i=r.c[s];c+="<li"+o+"><a"+a+' href="#'+function(e){for(var n=e,r=2;l.hasOwnProperty(n);)n=e+"-"+r++;return l[n]=!0,n}(t.slugify(s))+'">'+("function"==typeof t.format?t.format(s,n):n(s))+"</a>"+e(i,l)+"</li>"}),c+="</"+n(t.listType)+">"}(l)},r.core.ruler.push("generateTocAst",function(e){l=function(e){for(var n,r={l:0,n:"",c:{}},l=[r],s=Array.isArray(t.level)?(n=t.level,function(e){return n.includes(e)}):function(e){return function(n){return n>=e}}(t.level),o=0,a=e.length;o<a;o++){var i=e[o];if("heading_open"===i.type){var c={l:parseInt(i.tag.substr(1),10),n:e[o+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),c:{}};if(s(c.l))if(c.l>l[0].l)l[0].c[c.n]=c,l.unshift(c);else if(c.l===l[0].l)l[1].c[c.n]=c,l[0]=c;else{for(;c.l<=l[0].l;)l.shift();l[0].c[c.n]=c,l.unshift(c)}}}return r}(e.tokens)}),r.block.ruler.before("heading","toc",function(e,n,r,t){var l;if(e.sCount[n]-e.blkIndent>=4)return!1;var o=e.src.slice(e.bMarks[n]+e.tShift[n],e.eMarks[n]).split(" ")[0];return!(!s.test(o)||!t&&(e.line=n+1,(l=e.push("tocOpen","nav",1)).markup="",l.map=[n,e.line],(l=e.push("tocBody","",0)).markup="",l.map=[n,e.line],l.children=[],(l=e.push("tocClose","nav",-1)).markup="",0))},{alt:["paragraph","reference","blockquote"]})};
//# sourceMappingURL=markdownItTocDoneRight.js.map
